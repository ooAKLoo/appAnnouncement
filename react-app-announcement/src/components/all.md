æ ¸å¿ƒé—®é¢˜ï¼šä½ çš„é¡µé¢ä¸Šæœ‰ä¸¤ç§å¯æ‹–æ‹½å…ƒç´ ç±»å‹ï¼Œä½†æ¡†é€‰é€»è¾‘åªå¤„ç†äº†å…¶ä¸­ä¸€ç§ã€‚

  1. DynamicComponent (å³é”®æ·»åŠ çš„å…ƒç´ ) - ä½¿ç”¨ data-component-id å±æ€§
  2. Editable (æ¨¡æ¿è‡ªå¸¦çš„å…ƒç´ ï¼Œå¦‚APP iconã€æ ‡é¢˜ç­‰) - ä½¿ç”¨ data-editable-id
  å’Œ data-editable-path å±æ€§

  ä¹‹å‰çš„æ¡†é€‰ä»£ç åªæ£€æŸ¥äº† data-component-idï¼Œæ‰€ä»¥æ¨¡æ¿è‡ªå¸¦çš„ Editable 
  å…ƒç´ æ— æ³•è¢«æ¡†é€‰é€‰ä¸­ã€‚

  ä¿®å¤å†…å®¹ (MainContent.jsx:403-440):
  - æ¡†é€‰é€»è¾‘ç°åœ¨åŒæ—¶æ£€æŸ¥ä¸¤ç§å…ƒç´ ç±»å‹
  - å…ˆæ£€æŸ¥ data-component-idï¼ˆDynamicComponentï¼‰
  - å†æ£€æŸ¥ data-editable-id + data-editable-pathï¼ˆEditableï¼‰
  - æ·»åŠ è¯¦ç»†æ—¥å¿—ï¼ŒåŒºåˆ†é€‰ä¸­çš„å…ƒç´ ç±»å‹

  ç°åœ¨åˆ·æ–°é¡µé¢ï¼Œæ¡†é€‰åŠŸèƒ½åº”è¯¥å¯ä»¥é€‰ä¸­æ‰€æœ‰å¯æ‹–æ‹½å…ƒç´ äº†ï¼è¯•è¯•æ‹–ä¸€ä¸ªæ¡†ï¼ŒåŒ…æ‹¬æ¨¡æ¿
  è‡ªå¸¦çš„ APP iconã€æ ‡é¢˜ç­‰å…ƒç´ ã€‚



 æ‰¾åˆ°æ ¹æœ¬åŸå› äº†ï¼ EditManager.jsx ç¬¬50è¡Œä½¿ç”¨æ•è·æ¨¡å¼ç›‘å¬å…¨å±€ mousedownï¼š

  document.addEventListener('mousedown', handleClick, true); // true = 
  æ•è·é˜¶æ®µ

  è¿™æ„å‘³ç€ï¼š
  1. ä½ ç‚¹å‡»å¤šé€‰æ¡†çš„ç™½è‰²æ§åˆ¶ç‚¹
  2. EditManager åœ¨æ•è·é˜¶æ®µæœ€å…ˆæ”¶åˆ°äº‹ä»¶ï¼ˆæ¯” MultiSelectionBox æ›´æ—©ï¼‰
  3. æ£€æŸ¥åˆ°ä¸æ˜¯å¯ç¼–è¾‘å…ƒç´ ï¼Œæ‰§è¡Œç¬¬42-46è¡Œçš„"å–æ¶ˆé€‰ä¸­"é€»è¾‘
  4. é€‰ä¸­çŠ¶æ€è¢«æ¸…ç©ºï¼Œå¤šé€‰æ¡†æ¶ˆå¤±

  è™½ç„¶ MultiSelectionBox è°ƒç”¨äº† stopPropagation()ï¼Œä½†æ•è·æ¨¡å¼ä¼šç»•è¿‡å®ƒã€‚


äº†å®æ—¶æ¡†é€‰åŠŸèƒ½ï¼Œå°±åƒ Figma/Canva ä¸€æ ·ã€‚

  æ ¸å¿ƒæ”¹è¿›ï¼š

  1. å®æ—¶é€‰ä¸­ - handleSelectionMove ä¸­ï¼š
    - æ¯æ¬¡é¼ æ ‡ç§»åŠ¨æ—¶è®¡ç®—é€‰æ¡†èŒƒå›´
    - æ£€æµ‹å“ªäº›å…ƒç´ åœ¨èŒƒå›´å†…
    - ç«‹å³æ›´æ–°é€‰ä¸­çŠ¶æ€
    - èŒƒå›´å†…å…ƒç´ ä¼šç«‹å³æ˜¾ç¤ºè“è‰²è¾¹æ¡†
  2. åŠ¨æ€åé¦ˆï¼š
    - æ‹–æ‹½æ¡†æ‰©å¤§ï¼šæ›´å¤šå…ƒç´ è¢«é€‰ä¸­
    - æ‹–æ‹½æ¡†ç¼©å°ï¼šç¦»å¼€èŒƒå›´çš„å…ƒç´ å–æ¶ˆé€‰ä¸­
    - 1ä¸ªå…ƒç´ ä¹Ÿèƒ½é€‰ä¸­ï¼ˆä¸éœ€è¦ç­‰åˆ°å…¨éƒ¨åŒ…å›´ï¼‰
  3. ç®€åŒ–ç»“æŸé€»è¾‘ - handleSelectionEndï¼š
    - åªè´Ÿè´£æ¸…ç†æ¡†é€‰çŠ¶æ€
    - é€‰ä¸­é€»è¾‘å·²åœ¨ç§»åŠ¨è¿‡ç¨‹ä¸­å®Œæˆ



å·²ç»ä¿®å¤äº†è¿™ä¸ªå¤æ‚çš„äº‹ä»¶å†²çªbugã€‚è®©æˆ‘æ€»ç»“ä¸€ä¸‹ä¿®å¤æ–¹æ¡ˆï¼š

  ğŸ”§ Bugä¿®å¤æ€»ç»“

  é—®é¢˜æ ¹æºï¼š

  æ¡†é€‰å®Œæˆåçš„ click äº‹ä»¶è§¦å‘ handleBackgroundClickï¼Œè¯¯åˆ¤ä¸º"ç‚¹å‡»èƒŒæ™¯"ï¼Œå¯¼è‡´
  ç«‹å³æ¸…ç©ºäº†åˆšé€‰ä¸­çš„å…ƒç´ å’Œæ ·å¼é¢æ¿ã€‚

  ä¿®å¤æ–¹æ¡ˆï¼šæ—¶åºä¿æŠ¤æœºåˆ¶

  1. MainContent.jsx çš„ä¿®æ”¹ï¼š

  âœ… æ·»åŠ ä¿æŠ¤æ ‡å¿— (Line 26)
  const [justFinishedSelecting, setJustFinishedSelecting] = useState(false);

  âœ… æ¡†é€‰ç»“æŸæ—¶è®¾ç½®æ ‡å¿— (Line 461-466)
  // è®¾ç½®æ ‡å¿—ï¼Œé˜²æ­¢åç»­ click äº‹ä»¶æ¸…ç©ºé€‰æ‹©
  setJustFinishedSelecting(true);
  setTimeout(() => {
      setJustFinishedSelecting(false);
  }, 150);  // 150ms ä¿æŠ¤çª—å£

  âœ… èƒŒæ™¯ç‚¹å‡»æ£€æŸ¥æ ‡å¿— (Line 328-332)
  // å¦‚æœåˆšå®Œæˆæ¡†é€‰ï¼Œè·³è¿‡æ¸…ç©ºé€»è¾‘
  if (justFinishedSelecting) {
      console.log('ğŸ”² åˆšå®Œæˆæ¡†é€‰ï¼Œè·³è¿‡èƒŒæ™¯ç‚¹å‡»æ¸…ç©º');
      return;
  }

  2. EditManager.jsx çš„ä¿®æ”¹ï¼š

  âœ… ç§»é™¤å†²çªé€»è¾‘ (Line 56-62)
  - æ³¨é‡Šæ‰äº† else åˆ†æ”¯ä¸­çš„ deselectElement() è°ƒç”¨
  - ç»Ÿä¸€ç”± MainContent çš„ handleBackgroundClick å¤„ç†èƒŒæ™¯ç‚¹å‡»æ¸…ç©º

  ä¿®å¤æ•ˆæœï¼š

  ä¿®å¤å‰ï¼š
  æ¡†é€‰å…ƒç´  â†’ æ¾å¼€é¼ æ ‡ â†’ å…ƒç´ è¢«é€‰ä¸­ â†’ æ ·å¼é¢æ¿æ‰“å¼€
  â†’ clickäº‹ä»¶è§¦å‘ â†’ è¯¯åˆ¤èƒŒæ™¯ â†’ æ¸…ç©ºé€‰æ‹© âŒ â†’ æ ·å¼é¢æ¿æ¶ˆå¤± âŒ

  ä¿®å¤åï¼š
  æ¡†é€‰å…ƒç´  â†’ æ¾å¼€é¼ æ ‡ â†’ å…ƒç´ è¢«é€‰ä¸­ â†’ æ ·å¼é¢æ¿æ‰“å¼€
  â†’ è®¾ç½®ä¿æŠ¤æ ‡å¿— â†’ clickäº‹ä»¶è§¦å‘ â†’ æ£€æµ‹åˆ°ä¿æŠ¤æ ‡å¿— â†’ è·³è¿‡æ¸…ç©º âœ…
  â†’ 150msåæ¸…é™¤æ ‡å¿— â†’ æ¢å¤æ­£å¸¸ç‚¹å‡»è¡Œä¸º âœ…



1. AppContext.jsxï¼ˆç¬¬ 531-604 è¡Œï¼‰

  - åˆ›å»ºç»Ÿä¸€çš„ generateTemplateCode å‡½æ•°ï¼ŒåŒ…å«ï¼š
    - åŠ¨æ€ç»„ä»¶é…ç½®ç”Ÿæˆ
    - æ¨¡å‹é…ç½®ç”Ÿæˆï¼ˆåŒºåˆ† 3D å’Œ 2Dï¼‰
    - 3Dï¼šrotation (x/y/z)ã€positionã€cameraDistance
    - 2Dï¼šscaleã€rotationã€x/y
  - æ·»åŠ  useEffectï¼šæ¨¡æ¿ç¼–è¾‘æ¨¡å¼å¼€å¯æ—¶ç«‹å³ç”Ÿæˆä»£ç 

  2. DynamicComponent.jsx

  - ç§»é™¤é‡å¤çš„ generateTemplateCode å®šä¹‰
  - ç›´æ¥ä½¿ç”¨ä» context å¯¼å…¥çš„ç‰ˆæœ¬

  3. æ‰€æœ‰æ¨¡å‹ç»„ä»¶ï¼ˆPhoneModel.jsxã€PhoneModel2D.jsxã€MacBookModel2D.jsxï¼‰

  - å¯¼å…¥ generateTemplateCode
  - åœ¨æ¨¡å‹çŠ¶æ€å˜åŒ–åè°ƒç”¨ç”Ÿæˆä»£ç 

  ç°åœ¨å¼€å¯æ¨¡æ¿ç¼–è¾‘æ¨¡å¼åï¼Œä»£ç ä¼šè‡ªåŠ¨åŒ…å«å®Œæ•´çš„æ¨¡å‹é…ç½®ä¿¡æ¯ï¼Œå¹¶ä¸”æ¨¡å‹çŠ¶æ€å˜åŒ–
  æ—¶ä¼šå®æ—¶æ›´æ–°ã€‚




  æˆ‘å·²ç»å®ç°äº†çœŸå®çš„è£å‰ªæ•ˆæœï¼š

  å®ç°æ–¹å¼ï¼š

  1. ç§»é™¤äº†é®ç½©å±‚

  - ä¸å†ä½¿ç”¨åŠé€æ˜é»‘è‰²é®ç½©çš„è§†è§‰æ•ˆæœ

  2. ä½¿ç”¨ CSS clip-path å®ç°çœŸå®è£å‰ª

  - æ·»åŠ äº† getClipPath() å‡½æ•°è®¡ç®—è£å‰ªåŒºåŸŸ
  - ä½¿ç”¨ inset() å‡½æ•°å®šä¹‰çŸ©å½¢è£å‰ªè·¯å¾„
  - è®¡ç®—å¯¼å‡ºæ¡†çš„ç²¾ç¡®ä½ç½®å’Œå°ºå¯¸

  3. è£å‰ªå®¹å™¨

  - åˆ›å»ºä¸€ä¸ªåŒ…è£¹å±‚åŒ…å«æ‰€æœ‰éœ€è¦è£å‰ªçš„å†…å®¹ï¼š
    - æ‰‹æœºæ¨¡å‹
    - åŠŸèƒ½åˆ—è¡¨
    - æ´»åŠ¨ä¿¡æ¯
    - æ‰€æœ‰åŠ¨æ€ç»„ä»¶
  - å¯¹è¿™ä¸ªå®¹å™¨åº”ç”¨ clipPath æ ·å¼

  4. ä¿æŒæ§åˆ¶å…ƒç´ ä¸è¢«è£å‰ª

  - å³é”®èœå•
  - æ¡†é€‰æ¡†
  - å¤šé€‰æ¡†
  - å¯¼å‡ºæ¡†æœ¬èº«
     è¿™äº›å…ƒç´ åœ¨è£å‰ªå®¹å™¨å¤–éƒ¨ï¼Œä¸å—å½±å“

  ç°åœ¨çš„æ•ˆæœæ˜¯ï¼š
  - âœ… æ¡†å†…å†…å®¹æ­£å¸¸æ˜¾ç¤º
  - âœ… æ¡†å¤–å†…å®¹ç›´æ¥è¢«è£å‰ªï¼ˆä¸å¯è§ï¼‰
  - âœ… èƒŒæ™¯ä¿æŒæ­£å¸¸æ˜¾ç¤º
  - âœ… æ§åˆ¶æŒ‰é’®å’Œå¯¼å‡ºæ¡†ä¸å—å½±å“

  è¿™æ˜¯çœŸå®çš„ CSS è£å‰ªï¼Œè¶…å‡ºå¯¼å‡ºæ¡†çš„å†…å®¹ä¼šè¢«ç›´æ¥åˆ‡æ‰ï¼



  ğŸ”§ ä¿®å¤çš„æ ¸å¿ƒé—®é¢˜

  1. EditManager.jsx - ç¡¬ç¼–ç çš„é¢æ¿åˆ‡æ¢

  é—®é¢˜ï¼š æ‰€æœ‰å…ƒç´ ç‚¹å‡»æ—¶éƒ½å¼ºåˆ¶æ‰“å¼€æ ·å¼é¢æ¿ (setCurrentPanel('style'))

  è§£å†³ï¼š æ·»åŠ æ™ºèƒ½åˆ¤æ–­é€»è¾‘
  // åˆ¤æ–­æ˜¯å¦æ˜¯å›¾ç‰‡å…ƒç´ 
  const isImageElement = path && (
    path.includes('icon') || path.includes('image') || ...
  );

  // æ ¹æ®å…ƒç´ ç±»å‹æ‰“å¼€å¯¹åº”é¢æ¿
  if (isImageElement) {
    setCurrentPanel('image');
  } else {
    setCurrentPanel('style');
  }

  2. ImageSidebar.jsx & StylePanel.jsx - componentId æå–é”™è¯¯

  é—®é¢˜ï¼š ä½¿ç”¨ split('.') æ— æ³•å¤„ç†åŒ…å«å°æ•°ç‚¹çš„ IDï¼ˆå¦‚ 1759499775012.178ï¼‰

  è§£å†³ï¼š ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç²¾ç¡®åŒ¹é…
  const extractComponentId = (element) => {
    const match = element.match(/^dynamicComponents\.(.+)\.content$/);
    return match ? match[1] : null;
  };

  ğŸ“‹ å®Œæ•´çš„ç‚¹å‡»æµç¨‹

  ç‚¹å‡»å›¾ç‰‡å…ƒç´ æ—¶ï¼š

  1. EditManager æ£€æµ‹åˆ°ç‚¹å‡» â†’ è¯†åˆ«ä¸ºå›¾ç‰‡è·¯å¾„ â†’ setCurrentPanel('image')
  2. ImageSidebar æ¿€æ´» â†’ éªŒè¯å…ƒç´ ç±»å‹ â†’ æ˜¾ç¤ºå›¾ç‰‡ç¼–è¾‘é¢æ¿
  3. StylePanel æ£€æµ‹åˆ°å›¾ç‰‡å…ƒç´  â†’ è‡ªåŠ¨åˆ‡æ¢åˆ° image é¢æ¿ â†’ ä¸æ˜¾ç¤ºè‡ªå·±

  ç‚¹å‡»éå›¾ç‰‡å…ƒç´ æ—¶ï¼š

  1. EditManager æ£€æµ‹åˆ°ç‚¹å‡» â†’ è¯†åˆ«ä¸ºéå›¾ç‰‡è·¯å¾„ â†’ setCurrentPanel('style')
  2. StylePanel æ¿€æ´» â†’ æ˜¾ç¤ºæ ·å¼ç¼–è¾‘é¢æ¿
  3. ImageSidebar æ£€æµ‹åˆ°éå›¾ç‰‡å…ƒç´  â†’ ä¸æ˜¾ç¤º

  ç°åœ¨ç‚¹å‡»å›¾ç‰‡å…ƒç´ åº”è¯¥èƒ½æ­£ç¡®æ˜¾ç¤ºå›¾ç‰‡ä¾§è¾¹æ äº†ï¼




å®Œç¾ï¼æˆ‘æ‰¾åˆ°é—®é¢˜äº†ï¼ä»ä»£ç åˆ†æå¯ä»¥çœ‹å‡ºï¼š

  ğŸ“Š å®Œæ•´é“¾è·¯åˆ†æ

  1ï¸âƒ£ æ¨¡æ¿é…ç½®ï¼ˆæ‰€æœ‰æ¨¡æ¿ï¼‰

  {
    type: 'icon',
    content: appInfo.iconImage || appInfo.icon,
    dataPath: 'appInfo.iconImage',  // â† å…³é”®ï¼
    ...
  }

  2ï¸âƒ£ ContentPanel ä¸Šä¼ æµç¨‹ âœ…

  useUpload.js â†’ handleIconUpload()
  â†’ updateAppInfo({ iconImage: imageUrl })
  â†’ state.appInfo.iconImage æ›´æ–°
  â†’ DynamicComponent ä» state.appInfo.iconImage è¯»å–
  â†’ âœ… å›¾ç‰‡æ­£å¸¸æ˜¾ç¤º

  3ï¸âƒ£ ImageSidebar ä¸Šä¼ æµç¨‹ âŒ

  ImageSidebar â†’ handleImageUpload()
  â†’ updateDynamicComponent(id, { content: imageUrl })
  â†’ åªæ›´æ–° component.content
  â†’ æ²¡æœ‰æ›´æ–° state.appInfo.iconImage â† é—®é¢˜æ‰€åœ¨ï¼
  â†’ DynamicComponent ä» state.appInfo.iconImage è¯»å–ï¼ˆæ—§å€¼ï¼‰
  â†’ âŒ å›¾ç‰‡æ²¡æœ‰æ›´æ–°

  ğŸ› æ ¸å¿ƒé—®é¢˜

  æˆ‘çš„åˆ¤æ–­æ¡ä»¶å†™é”™äº†ï¼š
  if (pathParts[0] === 'appInfo' && pathParts[1] === 'icon')  // âŒ 
  æ°¸è¿œä¸åŒ¹é…

  ä»æ—¥å¿—çœ‹ï¼ŒdataPath æ˜¯ "appInfo.iconImage"ï¼Œæ‰€ä»¥ pathParts[1] æ˜¯
  "iconImage" è€Œä¸æ˜¯ "icon"ï¼



å®Œç¾ï¼å·²ç»ä¿®å¤ï¼æ ¸å¿ƒé—®é¢˜æ˜¯åˆ¤æ–­æ¡ä»¶é”™è¯¯ã€‚

  âœ… é—®é¢˜æ ¹æº

  dataPath çš„å®é™…å€¼ï¼š "appInfo.iconImage" ï¼ˆä¸æ˜¯ "appInfo.icon"ï¼‰

  é”™è¯¯çš„åˆ¤æ–­ï¼š
  if (pathParts[1] === 'icon')  // âŒ æ°¸è¿œä¸åŒ¹é…ï¼Œå› ä¸ºæ˜¯ 'iconImage'

  æ­£ç¡®çš„åˆ¤æ–­ï¼š
  if (pathParts[1] === 'iconImage')  // âœ… æ­£ç¡®åŒ¹é…

  ğŸ¯ ä¿®å¤åçš„å®Œæ•´æµç¨‹

  handleImageUpload() {
    // 1. è¯»å–æ–‡ä»¶ä¸º data URL
    const imageUrl = reader.readAsDataURL(file);

    // 2. æ›´æ–°åŠ¨æ€ç»„ä»¶çš„ contentï¼ˆç«‹å³æ˜¾ç¤ºï¼‰
    updateDynamicComponent(component.id, { content: imageUrl });

    // 3. æ£€æŸ¥ dataPath
    if (component.dataPath === 'appInfo.iconImage') {
      // åŒæ—¶æ›´æ–° stateï¼ˆæŒä¹…åŒ–ï¼‰
      updateAppInfo({ iconImage: imageUrl });  // â† å…³é”®ï¼
    }
  }

  ç°åœ¨è¯·æµ‹è¯•ï¼š
  1. ç‚¹å‡»å†…å®¹åŒºçš„ APP å›¾æ ‡
  2. ImageSidebar æ‰“å¼€
  3. ä¸Šä¼ æ–°å›¾ç‰‡
  4. åº”è¯¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºï¼š
    - ğŸ” æ£€æŸ¥ dataPath: appInfo.iconImage åˆ†å‰²ç»“æœ: ["appInfo", "iconImage"]
    - âœ… åŠ¨æ€ç»„ä»¶å…³è”åˆ° appInfo.iconImageï¼ŒåŒæ—¶æ›´æ–° state
  5. å›¾ç‰‡åº”è¯¥ç«‹å³æ›´æ–°å¹¶æŒä¹…åŒ–ï¼



æ¨¡æ¿é…ç½®ä»£ç 
react-app-announcement/src/context/AppContext.jsx
react-app-announcement/src/data/productHunt/productHuntTemplateData.js