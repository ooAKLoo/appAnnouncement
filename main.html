<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APP下载页面</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body>
    <!-- Excalidraw风格顶部工具栏 -->
    <div class="top-toolbar">
        <div class="toolbar-left">
            <button class="toolbar-tab" data-tab="template">
                <i data-lucide="layout-template" class="toolbar-tab-icon"></i>
                <span>模板</span>
            </button>
            <button class="toolbar-tab active" data-tab="app">
                <i data-lucide="smartphone" class="toolbar-tab-icon"></i>
                <span>APP配置</span>
            </button>
            <button class="toolbar-tab" data-tab="design">
                <i data-lucide="palette" class="toolbar-tab-icon"></i>
                <span>设计</span>
            </button>
        </div>
        
        <div class="toolbar-right">
            <div class="download-dropdown">
                <button class="download-btn-main" onclick="toggleDownloadMenu()">
                    <i data-lucide="download" class="download-icon"></i>
                    <span>下载</span>
                    <i data-lucide="chevron-down" class="chevron-icon"></i>
                </button>
                <div class="download-menu" id="downloadMenu">
                    <button class="download-option" onclick="downloadAs('png')">
                        <i data-lucide="image"></i>
                        <span>PNG 图片</span>
                    </button>
                    <button class="download-option" onclick="downloadAs('jpg')">
                        <i data-lucide="image"></i>
                        <span>JPG 图片</span>
                    </button>
                    <button class="download-option" onclick="downloadAs('pdf')">
                        <i data-lucide="file-text"></i>
                        <span>PDF 文档</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 左侧配置面板 -->
    <div class="left-config-panel">
        <!-- 模板选择 -->
        <div class="config-section" data-section="template">
            <div class="config-section-title">
                <i data-lucide="layout-template"></i>
                模板选择
            </div>
            
            <div class="config-group">
                <div class="config-group-label">布局样式</div>
                <div class="template-grid">
                    <div class="template-item active" data-template="classic">
                        <div class="template-preview">
                            <div class="template-preview-left">
                                <div class="template-preview-logo"></div>
                                <div class="template-preview-title"></div>
                                <div class="template-preview-desc"></div>
                                <div class="template-preview-btns"></div>
                            </div>
                            <div class="template-preview-phone"></div>
                        </div>
                        <div class="template-name">经典布局</div>
                        <div class="template-desc">左文右图，适合突出产品特性</div>
                    </div>
                    
                    <div class="template-item" data-template="center">
                        <div class="template-preview">
                            <div class="template-preview-center">
                                <div class="template-preview-logo"></div>
                                <div class="template-preview-title"></div>
                                <div class="template-preview-desc"></div>
                                <div class="template-preview-btns"></div>
                                <div class="template-preview-phone-small"></div>
                            </div>
                        </div>
                        <div class="template-name">居中布局</div>
                        <div class="template-desc">内容居中，简洁现代</div>
                    </div>
                    
                    <div class="template-item" data-template="minimal">
                        <div class="template-preview">
                            <div class="template-preview-minimal">
                                <div class="template-preview-title"></div>
                                <div class="template-preview-btns"></div>
                            </div>
                            <div class="template-preview-phone-large"></div>
                        </div>
                        <div class="template-name">极简布局</div>
                        <div class="template-desc">突出产品，最小干扰</div>
                    </div>
                    
                    <div class="template-item" data-template="elegant">
                        <div class="template-preview">
                            <div class="template-preview-elegant">
                                <div class="template-preview-logo-small"></div>
                                <div class="template-preview-title-elegant"></div>
                                <div class="template-preview-desc-elegant"></div>
                                <div class="template-preview-btns-elegant"></div>
                            </div>
                            <div class="template-preview-phone-float"></div>
                        </div>
                        <div class="template-name">优雅布局</div>
                        <div class="template-desc">精致设计，商务感强</div>
                    </div>
                    
                    <div class="template-item" data-template="light">
                        <div class="template-preview">
                            <div class="template-preview-light">
                                <div class="template-preview-title-light"></div>
                                <div class="template-preview-desc-light"></div>
                                <div class="template-preview-btns-light"></div>
                                <div class="template-preview-cards"></div>
                            </div>
                        </div>
                        <div class="template-name">轻盈布局</div>
                        <div class="template-desc">卡片式设计，现代简约</div>
                    </div>
                    
                    <div class="template-item" data-template="premium">
                        <div class="template-preview">
                            <div class="template-preview-premium">
                                <div class="template-preview-badge"></div>
                                <div class="template-preview-title-premium"></div>
                                <div class="template-preview-features"></div>
                                <div class="template-preview-btns-premium"></div>
                            </div>
                            <div class="template-preview-phone-premium"></div>
                        </div>
                        <div class="template-name">高级布局</div>
                        <div class="template-desc">奢华质感，突出品质</div>
                    </div>
                </div>
            </div>
            
        </div>

        <!-- APP配置 -->
        <div class="config-section active" data-section="app">
            <div class="config-section-title">
                <i data-lucide="smartphone"></i>
                APP配置
            </div>
            
            <!-- 基本信息 -->
            <div class="config-group">
                <div class="config-group-label">基本信息</div>
                <input type="text" class="config-input" id="appNameInput" placeholder="输入APP名称" maxlength="20" style="margin-bottom: 8px;">
                <input type="text" class="config-input" id="mainTitleInput" placeholder="输入主标题" maxlength="50" style="margin-bottom: 8px;">
                <textarea class="config-input" id="appDescInput" placeholder="输入APP描述" maxlength="100" rows="3"></textarea>
            </div>
            
            <!-- 媒体资源 -->
            <div class="config-group">
                <div class="config-group-label">媒体资源</div>
                <input type="file" id="iconUpload" accept="image/*" style="display: none;">
                <div class="config-upload-btn" onclick="document.getElementById('iconUpload').click()" style="margin-bottom: 8px;">
                    <i data-lucide="image"></i>
                    选择APP图标
                </div>
                <input type="file" id="screenUpload" accept="image/*" style="display: none;">
                <div class="config-upload-btn" onclick="document.getElementById('screenUpload').click()">
                    <i data-lucide="monitor-smartphone"></i>
                    选择APP截图
                </div>
            </div>
            
            <!-- 下载链接 -->
            <div class="config-group">
                <div class="config-group-label">下载链接</div>
                <div class="config-checkbox-row" style="margin-bottom: 8px;">
                    <input type="checkbox" id="showAppStore" checked>
                    <label for="showAppStore" class="config-checkbox-label">显示 App Store</label>
                </div>
                <input type="url" class="config-input" id="appStoreInput" placeholder="App Store链接" style="margin-bottom: 12px;">
                
                <div class="config-checkbox-row" style="margin-bottom: 8px;">
                    <input type="checkbox" id="showGooglePlay" checked>
                    <label for="showGooglePlay" class="config-checkbox-label">显示 Google Play</label>
                </div>
                <input type="url" class="config-input" id="googlePlayInput" placeholder="Google Play链接">
            </div>
        </div>

        <!-- 设计配置 -->
        <div class="config-section" data-section="design">
            <div class="config-section-title">
                <i data-lucide="palette"></i>
                设计配置
            </div>
            
            <div class="config-group">
                <div class="config-group-label">配色方案</div>
                <div class="color-scheme-grid">
                    <div class="color-scheme-item active" data-scheme="blue">
                        <div class="color-scheme-preview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                        <div class="color-scheme-name">科技蓝</div>
                    </div>
                    <div class="color-scheme-item" data-scheme="purple">
                        <div class="color-scheme-preview" style="background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 100%);"></div>
                        <div class="color-scheme-name">优雅紫</div>
                    </div>
                    <div class="color-scheme-item" data-scheme="green">
                        <div class="color-scheme-preview" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);"></div>
                        <div class="color-scheme-name">自然绿</div>
                    </div>
                    <div class="color-scheme-item" data-scheme="orange">
                        <div class="color-scheme-preview" style="background: linear-gradient(135deg, #F97316 0%, #EA580C 100%);"></div>
                        <div class="color-scheme-name">活力橙</div>
                    </div>
                </div>
            </div>

            <div class="config-group">
                <div class="config-group-label">自定义颜色</div>
                <div class="config-color-row" style="margin-bottom: 12px;">
                    <input type="color" class="config-color-input" id="bgColorInput" value="#667eea">
                    <div class="config-color-label">主色调</div>
                </div>
                <div class="config-color-row">
                    <input type="color" class="config-color-input" id="gradientColorInput" value="#764ba2">
                    <div class="config-color-label">渐变色</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 背景装饰 -->
    <div class="bg-decoration decoration-1"></div>
    <div class="bg-decoration decoration-2"></div>

    <div class="container">
        <!-- 图片预览 -->
        <div class="image-preview" id="imagePreview">
            <img id="previewImg" src="" alt="APP截图预览">
            <div class="preview-label">APP截图预览</div>
        </div>

        <div class="content-wrapper">
            <!-- 左侧内容 -->
            <div class="left-content">
                <div class="app-logo">
                    <div class="logo-icon">B</div>
                    <div class="logo-text">Bompay</div>
                </div>

                <h1 class="main-title">Download Bompay today</h1>

                <p class="subtitle">
                    体验全新的支付方式，让生活更简单
                </p>

                <div class="download-buttons">
                    <a href="#" class="download-btn">
                        <svg class="store-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z" />
                        </svg>
                        <span>App Store</span>
                    </a>
                    <a href="#" class="download-btn">
                        <svg class="store-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M3,20.5V3.5C3,2.91 3.34,2.39 3.84,2.15L13.69,12L3.84,21.85C3.34,21.6 3,21.09 3,20.5M16.81,15.12L6.05,21.34L14.54,12.85L16.81,15.12M20.16,10.81C20.5,11.08 20.75,11.5 20.75,12C20.75,12.5 20.5,12.92 20.16,13.19L17.89,14.5L15.39,12L17.89,9.5L20.16,10.81M6.05,2.66L16.81,8.88L14.54,11.15L6.05,2.66Z" />
                        </svg>
                        <span>Google Play</span>
                    </a>
                </div>

                <!-- APP配置和上传控件 -->
                <div class="config-panel">
                    <h3 style="color: white; margin-bottom: 20px; font-size: 18px;">自定义你的APP展示</h3>

                    <div class="upload-container">
                        <input type="file" id="screenUpload" accept="image/*" style="display: none;">
                        <input type="file" id="iconUpload" accept="image/*" style="display: none;">
                        <button class="upload-btn" onclick="document.getElementById('screenUpload').click()">
                            📱 上传APP截图
                        </button>
                        <button class="upload-btn" onclick="document.getElementById('iconUpload').click()">
                            🎨 上传APP图标
                        </button>
                        <button class="upload-btn secondary" onclick="useDefaultScreen()">
                            🖼️ 使用示例
                        </button>
                    </div>

                    <div class="config-inputs">
                        <input type="text" id="appNameInput" placeholder="APP名称" maxlength="20">
                        <textarea id="appDescInput" placeholder="APP描述" maxlength="100" rows="2"></textarea>
                        <input type="color" id="bgColorInput" value="#667eea" title="选择背景色">
                        <label for="bgColorInput" style="color: white; font-size: 14px; margin-top: 5px;">背景颜色</label>
                    </div>
                </div>
            </div>

            <!-- 右侧3D手机模型 -->
            <div class="phone-container">
                <div id="canvas-container">
                    <div class="loading-indicator" id="loading">
                        <div class="loading-spinner"></div>
                        <div>加载3D模型中...</div>
                    </div>
                </div>

                <!-- 手机屏幕内容（可选） -->
                <div class="screen-content" id="screenContent">
                    <div class="screen-inner">
                        <div class="app-icon-preview">B</div>
                        <div class="app-name-preview">Bompay</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 引入Three.js和GLTFLoader -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/controls/OrbitControls.js"></script>
    
    <!-- 引入模块化JavaScript文件 -->
    <script src="js/config.js"></script>
    <script src="js/model3d.js"></script>
    <script src="js/upload.js"></script>
    <script src="js/download.js"></script>
    <script src="js/app.js"></script>

</body>

</html>